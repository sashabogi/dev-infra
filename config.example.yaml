daneel:
  host: "0.0.0.0"
  port: 8889

providers:
  deepseek:
    endpoint: "https://api.deepseek.com/v1/chat/completions"
    api_key_env: "DEEPSEEK_API_KEY"
    model: "deepseek-chat"
    role: primary_background
    cost_per_million:
      input: 0.14
      output: 0.28

  kimi:
    endpoint: "https://api.moonshot.cn/v1/chat/completions"
    api_key_env: "KIMI_API_KEY"
    model: "moonshot-v1-8k"
    role: secondary
    cost_per_million:
      input: 0.60
      output: 0.60

  openrouter:
    endpoint: "https://openrouter.ai/api/v1/chat/completions"
    api_key_env: "OPENROUTER_API_KEY"
    model: "meta-llama/llama-3.1-70b-instruct"
    role: bulk_tasks
    cost_per_million:
      input: 0.40
      output: 0.40

  minimax:
    endpoint: "https://api.minimax.chat/v1/text/chatcompletion_v2"
    api_key_env: "MINIMAX_API_KEY"
    model: "MiniMax-Text-01"
    role: bulk_tasks
    cost_per_million:
      input: 0.30
      output: 2.40

  cerebras:
    endpoint: "https://api.cerebras.ai/v1/chat/completions"
    api_key_env: "CEREBRAS_API_KEY"
    model: "llama-3.3-70b"
    role: compaction
    cost_per_million:
      input: 0.60
      output: 0.60

  ollama:
    endpoint: "http://localhost:11434/v1/chat/completions"
    api_key_env: ""
    model: "qwen2.5-coder:7b"
    role: fallback
    cost_per_million:
      input: 0
      output: 0

quality_gate:
  threshold: 0.5
  checks:
    - xml_hallucination
    - formatting_violation
    - prompt_injection
  on_failure: reject

failover_chain:
  - deepseek
  - kimi
  - openrouter
  - minimax
  - cerebras
  - ollama

rescue:
  extraction_model: cerebras
  importance_threshold: 7
  db_path: "~/.dev-infra/memory.db"
  max_context_chars: 100000

costs:
  rolling_window_hours: 24
  db_path: "~/.dev-infra/costs.db"

# Role-aware routing (Seldon integration)
# When requests include X-Seldon-Role and X-Provider headers,
# Daneel respects the provider choice instead of cost-routing.
# Quality gate and cost tracking still apply.
seldon_integration:
  enabled: true
  # Additional providers Seldon might use that aren't in the failover chain.
  # These won't be cost-routed to, but Daneel will track costs when
  # Seldon explicitly requests them via X-Provider header.
  extra_providers:
    anthropic:
      endpoint: "https://api.anthropic.com/v1/messages"
      api_key_env: "ANTHROPIC_API_KEY"
      model: "claude-opus-4"
      cost_per_million:
        input: 15.00
        output: 75.00
    openai:
      endpoint: "https://api.openai.com/v1/chat/completions"
      api_key_env: "OPENAI_API_KEY"
      model: "gpt-4o"
      cost_per_million:
        input: 2.50
        output: 10.00
    google:
      endpoint: "https://generativelanguage.googleapis.com/v1beta/openai/chat/completions"
      api_key_env: "GOOGLE_API_KEY"
      model: "gemini-2.5-pro"
      cost_per_million:
        input: 1.25
        output: 10.00
